"use strict";function bytesToSize(e){if(!e)return"0 Byte";const t=parseInt(Math.floor(Math.log(e)/Math.log(1024)));return Math.round(e/Math.pow(1024,t))+" "+["Bytes","KB","MB","GB","TB"][t]}const element=(e,t=[],o)=>{const i=document.createElement(e);return t.length&&i.classList.add(...t),o&&i.insertAdjacentHTML("beforeend",o),i};function sendRequest(e,t,o=null){return fetch(t,{method:e,headers:{"Content-Type":"application/json"}}).then(e=>e.ok?e.json():e.json().then(e=>{const t=new Error("Что-то пошло не так");throw t.data=e,t}))}window.addEventListener("scroll",()=>{const e=window.innerHeight,t=document.querySelector(".btn__scroll-top");pageYOffset>e?(t.classList.add("btn__scroll-top--active"),t.addEventListener("click",e=>{smothScroll(e.clientY)})):t.classList.remove("btn__scroll-top--active")});const smothScroll=e=>{let t=e||0;t>0&&setTimeout(()=>{window.scrollTo(0,t),smothScroll(t-20)},10)},isMobile=function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t},isMobileOrTablet=function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t};function removeClassest(e,t){if(e.length>0)for(let o of e)o.classList.remove(t)}const spollersArray=document.querySelectorAll("[data-spollers]");if(spollersArray.length>0){const e=Array.from(spollersArray).filter((e,t,o)=>!e.dataset.spollers.split(",")[0]);e.length>0&&initSpollers(e);const t=Array.from(spollersArray).filter((e,t,o)=>e.dataset.spollers.split(",")[0]);if(t.length>0){const e=[];t.forEach(t=>{const o={},i=t.dataset.spollers.split(",");o.value=i[0],o.type=i[1]?i[1].trim():"max",o.item=t,e.push(o)});let o=e.map(e=>"("+e.type+"-width: "+e.value+"px),"+e.value+","+e.type);o=o.filter((e,t,o)=>o.indexOf(e)===t),o.forEach(t=>{const o=t.split(","),i=o[1],s=o[2],r=window.matchMedia(o[0]),n=e.filter(e=>{if(e.value===i&&e.type===s)return!0});r.addListener((function(){initSpollers(n,r)})),initSpollers(n,r)})}function initSpollers(e,t=!1){e.forEach(e=>{e=t?e.item:e,t.matches||!t?(e.classList.add("_init"),initSpollerBody(e),e.addEventListener("click",setSpollerAction)):(e.classList.remove("_init"),initSpollerBody(e,!1),e.removeEventListener("click",setSpollerAction))})}function initSpollerBody(e,t=!0){const o=e.querySelectorAll("[data-spoller]");o.length>0&&o.forEach(e=>{t?(e.removeAttribute("tabindex"),e.classList.contains("active")||(e.nextElementSibling.hidden=!0)):(e.setAttribute("tabindex","-1"),e.nextElementSibling.hidden=!1)})}function setSpollerAction(e){const t=e.target;if(t.hasAttribute("data-spoller")||t.closest("[data-spoller]")){const o=t.hasAttribute("data-spoller")?t:t.closest("[data-spoller]"),i=o.closest("[data-spollers]"),s=!!i.hasAttribute("data-one-spoller");i.querySelectorAll("._slide").length||(s&&!o.classList.contains("active")&&hideSpollersBody(i),o.classList.toggle("active"),_slideToggle(o.nextElementSibling,500)),e.preventDefault()}}function hideSpollersBody(e){const t=e.querySelector("[data-spoller].active");t&&(t.classList.remove("active"),_slideUp(t.nextElementSibling,500))}}let _slideUp=(e,t=500)=>{e.classList.contains("_slide")||(e.classList.add("_slide"),e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=e.offsetHeight+"px",e.offsetHeight,e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,window.setTimeout(()=>{e.hidden=!0,e.style.removeProperty("height"),e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),e.classList.remove("_slide")},t))},_slideDown=(e,t=500)=>{if(!e.classList.contains("_slide")){e.classList.add("_slide"),e.hidden&&(e.hidden=!1);let o=e.offsetHeight;e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,e.offsetHeight,e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=o+"px",e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),window.setTimeout(()=>{e.style.removeProperty("height"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),e.classList.remove("_slide")},t)}},_slideToggle=(e,t=500)=>e.hidden?_slideDown(e,t):_slideUp(e,t);function ibg(){let e=document.querySelectorAll(".ibg");for(var t=0;t<e.length;t++)e[t].querySelector("img")&&(e[t].style.backgroundImage="url("+e[t].querySelector("img").getAttribute("src")+")")}ibg();const body=document.querySelector("body"),lockPadding=document.querySelectorAll(".lock-padding"),popupLinks=document.querySelectorAll(".popup-link");let unlock=!0;const timeout=800;if(popupLinks.length>0)for(let e=0;e<popupLinks.length;e++){const t=popupLinks[e];t.addEventListener("click",(function(e){const o=t.getAttribute("href").replace("#","");popupOpen(document.getElementById(o)),e.preventDefault()}))}const popupCloseIcon=document.querySelectorAll(".close-popup");if(popupCloseIcon.length>0)for(let e=0;e<popupCloseIcon.length;e++){const t=popupCloseIcon[e];t.addEventListener("click",(function(e){popupClose(t.closest(".popup")),e.preventDefault()}))}function popupOpen(e){if(e&&unlock){const t=document.querySelector(".popup.open");t?(console.log(t),popupClose(t,!1)):bodyLock(),e.classList.add("open"),e.addEventListener("click",(function(e){e.target.closest(".popup__content")||popupClose(e.target.closest(".popup"))}))}}function popupClose(e,t=!0){unlock&&(e.classList.remove("open"),t&&bodyUnLock())}function bodyLock(){const e=window.innerWidth-document.querySelector(".wrapper").offsetWidth+"px";if(lockPadding.length>0)for(let t=0;t<lockPadding.length;t++){lockPadding[t].style.paddingRight=e}body.style.paddingRight=e,body.classList.add("lock"),unlock=!1,setTimeout((function(){unlock=!0}),800)}function bodyUnLock(){setTimeout((function(){if(lockPadding.length>0)for(let e=0;e<lockPadding.length;e++){lockPadding[e].style.paddingRight="0px"}body.style.paddingRight="0px",body.classList.remove("lock")}),800),unlock=!1,setTimeout((function(){unlock=!0}),800)}document.addEventListener("keydown",(function(e){if(27===e.which){popupClose(document.querySelector(".popup.open"))}}));const forms=document.querySelectorAll(".form"),dataValue=document.querySelectorAll("[data-value]");if(dataValue.length>0)for(let e of dataValue)e.placeholder=e.dataset.value;if(forms.length>0)for(let e of forms)e.addEventListener("submit",formSend);function formSend(e){e.preventDefault();let t,o=0;if(forms.length>0)for(let e of forms)o+=formValidate(e),t=new FormData(e);if(0===o){document.querySelector(".popup_subscribe-message").classList.add("open")}else{const e=element("span",["form__error"],"Ошибка");document.querySelector("form._error").append(e)}}function formValidate(e){let t=0,o=document.querySelectorAll("._reg");for(let e=0;e<o.length;e++){const i=o[e];formRemoveError(i),i.classList.contains("_email")?emailTest(i)&&(formAddError(i),t++):("checkbox"===i.getAttribute("type")&&!1===i.checked||""===i.value)&&(formAddError(i),t++)}return t}function formAddError(e){e.parentElement.classList.add("_error"),e.classList.add("_error")}function formRemoveError(e){e.parentElement.classList.remove("_error"),e.classList.remove("_error")}function emailTest(e){return!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(e.value)}let sliders=document.querySelectorAll("._swiper");if(sliders){for(let e=0;e<sliders.length;e++){let t=sliders[e];if(!t.classList.contains("swiper-bild")){let e=t.children;if(e)for(let t=0;t<e.length;t++){e[t].classList.add("swiper-slide")}let o=t.innerHTML,i=element("div",["swiper-wrapper"],o);if(t.innerHTML="",t.appendChild(i),t.classList.add("swiper-bild"),t.classList.contains("_swiper_scroll")){let e=element("div",["swiper-scrollbar"]);t.appendChild(e)}}t.classList.contains("_gallery")}sliders_bild_callback()}function sliders_bild_callback(e){}const sliderScrollItems=document.querySelectorAll("._swiper_scroll");if(sliderScrollItems.length>0)for(let e=0;e<sliderScrollItems.length;e++){const t=sliderScrollItems[e],o=t.querySelector(".swiper-scrollbar");new Swiper(t,{observer:!0,observeParent:!0,direction:"vertical",slidesPerView:"auto",freeMode:!0,scrollbar:{el:o,draggable:!0,snapOnRelease:!1},mousewheel:{releaseOnEdges:!0}}).scrollbar.updateSize()}function sliders_bild_callback(e){}document.querySelector(".slider-main__body")&&new Swiper(".slider-main__body",{observer:!0,observeParents:!0,slidesPerView:1,spaceBetween:32,watchOverflow:!0,speed:800,loop:!0,loopAdditionalSlides:5,preloadImages:!1,parallax:!0,pagination:{el:".controls-slider-main__dotts",clickable:!0},navigation:{nextEl:".slider-main .slider-arrow_next",prevEl:".slider-main .slider-arrow_prev"}}),document.querySelector(".slider-rooms__body")&&new Swiper(".slider-rooms__body",{observer:!0,observeParents:!0,slidesPerView:"auto",spaceBetween:24,watchOverflow:!0,speed:800,loop:!0,loopAdditionalSlides:5,preloadImages:!1,parallax:!0,pagination:{el:".slider-rooms__dotts",clickable:!0},navigation:{nextEl:".slider-rooms .slider-arrow_next",prevEl:".slider-rooms .slider-arrow_prev"}}),document.querySelector(".slider-tips__body")&&new Swiper(".slider-tips__body",{observer:!0,observeParents:!0,slidesPerView:3,spaceBetween:32,watchOverflow:!0,speed:800,loop:!0,loopAdditionalSlides:5,pagination:{el:".slider-tips__dotts",clickable:!0},navigation:{nextEl:".slider-tips .slider-arrow_next",prevEl:".slider-tips .slider-arrow_prev"},breakpoints:{320:{slidesPerView:1.1,spaceBetween:15},768:{slidesPerView:2,spaceBetween:20},768:{slidesPerView:2,spaceBetween:32}}});class DynamicAdapt{constructor(e){this.type=e}init(){this.оbjects=[],this.daClassname="_dynamic_adapt_",this.nodes=[...document.querySelectorAll("[data-da]")],this.nodes.forEach(e=>{const t=e.dataset.da.trim().split(","),o={};o.element=e,o.parent=e.parentNode,o.destination=document.querySelector(""+t[0].trim()),o.breakpoint=t[1]?t[1].trim():"767",o.place=t[2]?t[2].trim():"last",o.index=this.indexInParent(o.parent,o.element),this.оbjects.push(o)}),this.arraySort(this.оbjects),this.mediaQueries=this.оbjects.map(({breakpoint:e})=>`(${this.type}-width: ${e}px),${e}`).filter((e,t,o)=>o.indexOf(e)===t),this.mediaQueries.forEach(e=>{const t=e.split(","),o=window.matchMedia(t[0]),i=t[1],s=this.оbjects.filter(({breakpoint:e})=>e===i);o.addEventListener("change",()=>{this.mediaHandler(o,s)}),this.mediaHandler(o,s)})}mediaHandler(e,t){e.matches?t.forEach(e=>{e.index=this.indexInParent(e.parent,e.element),this.moveTo(e.place,e.element,e.destination)}):t.forEach(({parent:e,element:t,index:o})=>{t.classList.contains(this.daClassname)&&this.moveBack(e,t,o)})}moveTo(e,t,o){t.classList.add(this.daClassname),"last"===e||e>=o.children.length?o.append(t):"first"!==e?o.children[e].before(t):o.prepend(t)}moveBack(e,t,o){t.classList.remove(this.daClassname),void 0!==e.children[o]?e.children[o].before(t):e.append(t)}indexInParent(e,t){return[...e.children].indexOf(t)}arraySort(e){"min"===this.type?e.sort((e,t)=>e.breakpoint===t.breakpoint?e.place===t.place?0:"first"===e.place||"last"===t.place?-1:"last"===e.place||"first"===t.place?1:e.place-t.place:e.breakpoint-t.breakpoint):e.sort((e,t)=>e.breakpoint===t.breakpoint?e.place===t.place?0:"first"===e.place||"last"===t.place?1:"last"===e.place||"first"===t.place?-1:t.place-e.place:t.breakpoint-e.breakpoint)}}window.onload=function(){document.addEventListener("click",(function(e){var o=e.target;window.innerWidth>768&&isMobileOrTablet()&&(o.classList.contains(".menu__arrow")&&o.closest(".menu__item").classList.toggle("hover"),!o.closest(".menu__item")&&document.querySelectorAll(".menu__item.hover").length>0&&removeClassest(document.querySelectorAll(".menu__item.hover"),"hover"));o.classList.contains("search-form__icon")?document.querySelector(".search-form").classList.toggle("active"):!o.classList.contains(".search-form")&&document.querySelector(".search-form.active")&&document.querySelector(".search-form").classList.remove("active");o.classList.contains("icon-menu")&&(document.querySelector(".icon-menu").classList.toggle("active"),document.querySelector(".menu__body").classList.toggle("active"));o.classList.contains("products__more")&&(e.preventDefault(),function(e){if(!e.classList.contains("_hold")){e.classList.add("_hold");sendRequest("GET","json/products.json").then((function(t){t?(!function(e){var t=document.querySelector(".products__items");e.products.forEach((function(e){var o=e.id,i=e.url,s=e.image,r=e.title,n=e.text,a=e.price,l=e.priceOld,c=e.shareUrl,d=e.likeUrl,p=e.labels,m='<article data-pid="'.concat(o,'" class="products__item item-product">'),u="";if(p){var h="";p.forEach((function(e){h+='<div class="item-product__label item-product__label_'.concat(e.type,'">').concat(e.value,"</div>")})),u+='<div class="item-product__labels">',u+=h,u+="</div>"}var v='\n\t\t<a href="'.concat(i,'" class="item-product__image _ibg">\n\t\t\t<img src="images/products/').concat(s,'" alt="').concat(r,'">\n\t\t</a>\n\t'),f='\n\t\t<div class="item-product__content">\n\t\t\t<h3 class="item-product__title">'.concat(r,'</h3>\n\t\t\t<div class="item-product__text">').concat(n,"</div>\n\t\t</div>\n\t"),g="",y='<div class="item-product__price">Rp '.concat(a,"</div>"),_='<div class="item-product__price item-product__price_old">Rp '.concat(l,"</div>");g='<div class="item-product__prices">',g+=y,l&&(g+=_);var b="";b+='<div class="item-product__body">',b+=f,b+=g+="</div>",b+='\n\t\t<div class="item-product__actions actions-product">\n\t\t\t<div class="actions-product__body">\n\t\t\t\t<a href="" class="actions-product__button btn btn_white">Add to cart</a>\n\t\t\t\t<a href="'.concat(c,'" class="actions-product__link _icon-share">Share</a>\n\t\t\t\t<a href="').concat(d,'" class="actions-product__link _icon-favorite">Like</a>\n\t\t\t</div>\n\t\t</div>\n\t');var w="";w+=m,w+=u,w+=v,w+=b+="</div>",w+="</article>",t.insertAdjacentHTML("beforeend",w)}))}(t),e.classList.remove("_hold"),e.remove()):alert("Ошибка")})).catch((function(e){return console.log(e)}))}}(o));if(o.classList.contains("actions-product__button")){var i=o.closest(".item-product").dataset.pid;!function(e,o){if(!e.classList.contains("_hold")){e.classList.add("_hold"),e.classList.add("_fly");var i=document.querySelector(".cart-header__icon"),s=document.querySelector('[data-pid="'.concat(o,'"]')).querySelector(".item-product__image"),r=s.cloneNode(!0),n=s.offsetWidth,a=s.offsetHeight,l=s.getBoundingClientRect().top,c=s.getBoundingClientRect().left;r.setAttribute("class","_flyImage _ibg"),r.style.cssText="\n        left: ".concat(c,"px;\n        top: ").concat(l,"px;\n        width: ").concat(n,"px;\n        height: ").concat(a,"px;\n      "),document.body.append(r);var d=i.getBoundingClientRect().left,p=i.getBoundingClientRect().top;r.style.cssText="\n        left: ".concat(d,"px;\n        top: ").concat(p,"px;\n        width: 0px;\n        height: 0px;\n        opacity: 0\n      "),r.addEventListener("transitionend",(function(){e.classList.contains("_fly")&&(r.remove(),t(e,o),e.classList.remove("_fly"))}))}}(o,i),e.preventDefault()}o.classList.contains("cart-header__icon")||o.closest(".cart-header__icon")?document.querySelector(".cart-list").children.length>0&&(e.preventDefault(),document.querySelector(".cart-header").classList.toggle("active")):o.closest(".cart-header")||o.classList.contains("actions-product__button")||document.querySelector(".cart-header").classList.remove("active");if(o.classList.contains("cart-list__delete")){var s=o.closest(".cart-list__item").dataset.cartPid;t(o,s,!1),e.preventDefault()}})),new DynamicAdapt("max").init();var e=document.querySelector(".header");function t(e,t){var o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=document.querySelector(".cart-header"),s=document.querySelector(".cart-header__icon"),r=s.querySelector("span"),n=document.querySelector('[data-cart-pid="'.concat(t,'"]')),a=document.querySelector(".cart-list");if(o){if(r?r.innerHTML=++r.innerHTML:s.insertAdjacentHTML("beforeend","<span>1</span>"),n){var l=n.querySelector(".cart-list__quantity span");l.innerHTML=++l.innerHTML}else{var c=document.querySelector('[data-pid="'.concat(t,'"]')),d=c.querySelector(".item-product__image").innerHTML,p=c.querySelector(".item-product__title").innerHTML,m='\n        <a href="#" class="cart-list__image _ibg">'.concat(d,'</a>\n        <div class="cart-list__body">\n          <a href="#" class="cart-list__title">').concat(p,'</a>\n          <div class="cart-list__quantity">Quantity: <span>1</span></div>\n          <a href="#" class="cart-list__delete">Delete</a>\n        </div>\n        ');a.insertAdjacentHTML("beforeend",'<li data-cart-pid="'.concat(t,'" class="cart-list__item">').concat(m,"</li>"))}e.classList.remove("_hold")}else{var u=n.querySelector(".cart-list__quantity span");u.innerHTML=--u.innerHTML,parseInt(u.innerHTML)||n.remove();var h=--r.innerHTML;h?r.innerHTML=h:(r.remove(),i.classList.remove("active"))}}new IntersectionObserver((function(t,o){t[0].isIntersecting?e.classList.remove("_scroll"):e.classList.add("_scroll")})).observe(e);var o=document.querySelector(".furniture__body");if(o&&!isMobileOrTablet()){var i=function e(){var t=0;r.forEach((function(e){t+=e.offsetWidth}));var i=t-o.offsetWidth,c=Math.floor(l-a),d=i/200*(a+=c*n);s.style.cssText="transform: translate3d(".concat(-d,"px,0,0);"),Math.abs(c)>0?requestAnimationFrame(e):o.classList.remove("_init")},s=document.querySelector(".furniture__items"),r=document.querySelectorAll(".furniture__column"),n=o.dataset.speed,a=0,l=0;o.addEventListener("mousemove",(function(e){var t=o.offsetWidth,s=e.pageX-t/2;l=s/t*200,o.classList.contains("_init")||(requestAnimationFrame(i),o.classList.add("_init"))}))}};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJieXRlc1RvU2l6ZSIsImJ5dGVzIiwiaSIsInBhcnNlSW50IiwiTWF0aCIsImZsb29yIiwibG9nIiwid2luZG93IiwiZWxlbWVudCIsInRhZyIsImNsYXNzZXMiLCJjb250ZW50Iiwibm9kZSIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImxlbmd0aCIsImNsYXNzTGlzdCIsImFkZCIsImluc2VydEFkamFjZW50SFRNTCIsInRhcmdldEVsZW1lbnQiLCJtZXRob2QiLCJ0YXJnZXQiLCJib2R5IiwiaGVhZGVycyIsIkNvbnRlbnQtVHlwZSIsImlubmVyV2lkdGgiLCJ0aGVuIiwicmVzcG9uc2UiLCJvayIsImNvbnRhaW5zIiwicXVlcnlTZWxlY3RvciIsImUiLCJkYXRhIiwiZXJyb3IiLCJhZGRFdmVudExpc3RlbmVyIiwid2luZG93U2Nyb2xsIiwiaW5uZXJIZWlnaHQiLCJidG4iLCJ1cGRhdGVDYXJ0IiwiZGEiLCJpbml0Iiwic21vdGhTY3JvbGwiLCJwcmV2ZW50RGVmYXVsdCIsImhlYWRlckVsZW1lbnQiLCJhIiwic2VuZFJlcXVlc3QiLCJ2ZW5kb3IiLCJvcGVyYSIsImhlYWRlck9ic2VydmVyIiwiZ2V0UHJvZHVjdHMiLCJjaGVjayIsImVudHJpZXMiLCJhbGVydCIsInByb2R1Y3RJZCIsInByb2R1Y3RzIiwiZm9yRWFjaCIsInRlc3QiLCJidXR0b24iLCJwcm9kdWN0VGV4dCIsInByb2R1Y3RQcmljZSIsIml0ZW0iLCJwcm9kdWN0U2hhcmVVcmwiLCJzaGFyZVVybCIsInNwb2xsZXJzQXJyYXkiLCJwcm9kdWN0VGVtcGxhdGVMYWJlbHNTdGFydCIsInNwb2xsZXJzUmVndWxhciIsInByb2R1Y3RUZW1wbGF0ZUxhYmVsc0NvbnRlbnQiLCJmcm9tIiwiZmlsdGVyIiwicHJvZHVjdExhYmVscyIsInByb2R1Y3RUZW1wbGF0ZUxhYmVscyIsImluaXRTcG9sbGVycyIsInByb2R1Y3RMaWtlVXJsIiwic3BvbGxlcnNNZWRpYSIsInByb2R1Y3RUZW1wbGF0ZVByaWNlcyIsInByb2R1Y3RUZW1wbGF0ZVByaWNlc1N0YXJ0IiwicGFyYW1zQXJyYXkiLCJzcGxpdCIsInByb2R1Y3RUZW1wbGF0ZUJvZHkiLCJwcm9kdWN0VGVtcGxhdGVCb2R5U3RhcnQiLCJwcm9kdWN0VGVtcGxhdGUiLCJwcm9kdWN0QnV0dG9uIiwibWFwIiwic2VsZiIsInByb2R1Y3RUZW1wbGF0ZUNvbnRlbnQiLCJicmVha3BvaW50IiwicHJvZHVjdEFkZCIsImNhcnRJY29uIiwicHJvZHVjdHNJdGVtcyIsInZhbHVlIiwibWVkaWFCcmVha3BvaW50IiwidHlwZSIsIm1lZGlhVHlwZSIsIm1hdGNoTWVkaWEiLCJjYXJ0UHJvZHVjdEltYWdlIiwiY2FydFByb2R1Y3RRdWFudGl0eSIsImlubmVySFRNTCIsInByb2R1Y3RJbWFnZUZseUhlaWdodCIsInNwb2xsZXJzQmxvY2siLCJwcm9kdWN0SW1hZ2VGbHlUb3AiLCJwcm9kdWN0SW1hZ2UiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJwcm9kdWN0SW1hZ2VGbHlMZWZ0IiwicHJvZHVjdEltYWdlRmx5Iiwic2V0QXR0cmlidXRlIiwic3R5bGUiLCJhcHBlbmQiLCJzZXRTcG9sbGVyQWN0aW9uIiwiY2FydFF1YW50aXR5IiwiZnVybml0dXJlQ29sdW1uIiwiaW5pdFNwb2xsZXJCb2R5IiwiaGlkZVNwb2xsZXJCb2R5IiwiZnVybml0dXJlSXRlbXNXaWR0aCIsInNwb2xsZXJUaXRsZXMiLCJwb3NpdGlvblgiLCJwb3NpdGlvbiIsImZ1cm5pdHVyZURpZmZlcmVudCIsImhpZGRlbiIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsInNldE1vdXNlR2FsbGVyeVN0eWxlIiwiZWwiLCJjb29yZFhwcm9jZW50Iiwic3BvbGxlclRpdGxlIiwiY2FydFByb2R1Y3RUaXRsZSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJjYXJ0UHJvZHVjdCIsInNwb2xsZXJBY3RpdmVUaXRsZSIsIl9zbGlkZVVwIiwiY2FydFF1YW50aXR5VmFsdWUiLCJjYXJ0IiwicmVtb3ZlIiwidHJhbnNpdGlvblByb3BlcnR5IiwiZnVybml0dXJlIiwiaGVpZ2h0IiwiaXNNb2JpbGVPclRhYmxldCIsInNldFRpbWVvdXQiLCJkaXN0WCIsInJlbW92ZVByb3BlcnR5IiwiZnVybml0dXJlSXRlbXMiLCJkdXJhdGlvbiIsIl9zbGlkZURvd24iLCJzcGVlZCIsIm9mZnNldEhlaWdodCIsImZ1cm5pdHVyZVdpZHRoIiwiY29vcmRYIiwibWFyZ2luVG9wIl0sIm1hcHBpbmdzIjoiYUFDQSxTQUFBQSxZQUFBQyxHQUFBLElBQUFBLEVBQ0EsTUFBQSxTQUVBLE1BQUFDLEVBQUFDLFNBQUFDLEtBQUFDLE1BQUFELEtBQUFFLElBQUFMLEdBQUFHLEtBQUFFLElBQUEsUUFDQUMsT0FBQUEsS0FBQUEsTUFBQUEsRUFBQUEsS0FBQUEsSUFBQUEsS0FBQUEsSUFBQUEsSUFMQSxDQUFBLFFBQUEsS0FBQSxLQUFBLEtBQUEsTUFLQUEsR0FJRSxNQUFBQyxRQUFBLENBQUFDLEVBQUFDLEVBQUEsR0FBQUMsS0FDQSxNQUFBQyxFQUFBQyxTQUFBQyxjQUFBTCxHQVdBLE9BVEFDLEVBQUFLLFFBQ0FILEVBQUFJLFVBQUFDLE9BQUFQLEdBR0FDLEdBQ0FDLEVBQUFNLG1CQUFBLFlBQUFQLEdBSUFDLEdBU0UsU0FBTU8sWUFBYUMsRUFBS0MsRUFBeEJDLEVBQUEsTUFPSUgsT0FBQUEsTUFBQUEsRUFBQUEsQ0FFRkMsT0FBQUEsRUFFRUcsU0FWSkMsZUFBV0Msc0JBY1JDLEtBQUFQLEdBQUFRLEVBQUFDLEdBS0RmLEVBQUFBLE9BR0NNLEVBQUFBLE9BQWNILEtBQVVhLElBR3pCaEIsTUFBQUEsRUFBU2lCLElBQUFBLE1BQUFBLHVCQUhSWCxNQUFEWSxFQUFBQyxLQU1GQyxFQU5HZCxLQXFCRFksT0FBQUcsaUJBQUEsU0FBQSxLQTlDd0IsTUE0QzFCQyxFQUFBNUIsT0FBQTZCLHdFQVFBQyxFQUNFbEIsVUFBQUEsSUFBY0gsMkJBR2RxQixFQUFBSCxpQkFBYUosUUFBY0MsSUFFekJs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LE9BQ2hDLElBQUFULEVBQU13RixVQUFlaEYsU0FBR2hCLFVBQVMrRywyQkFHM0JpQixFQUFLeEIsc0JBSVgsSUFBSUksRUFBQUEsRUFBZ0JxQixhQXNCcEJWLEVBQUFBLE1BQVVsRyxTQUFBQSxTQUNSYixFQUFBb0YsTUFBQTRCLE9BQUEsRUFDQWhILEVBQU0wSCxNQUFBQSxXQUFpQlgsMEJBR3ZCL0csRUFBTTJILE1BQU1DLFVBQWFGLHlCQUd6QnRCLEVBQUFBLGtFQUVBcEcsRUFBSytHLE1BQUFBLG1CQUFvQnZHLEVBQXpCLEtBQ0V5RixFQUFBQSxNQUFBQSxPQUFBQSxFQUFzQkMsS0FDdEJhLEVBQUFBLE1BQVNLLGVBQWUsZUFDekJwSCxFQUFBb0YsTUFBQWdDLGVBQUEsa0JBQ0ZwSCxFQWREb0YsTUFBQWdDLGVBQUEsY0FlRHBILEVBQUFvRixNQUFBZ0MsZUFBQSxpQkE5WUhsSSxPQUFBZ0ksV0FBQSIsImZpbGUiOiJzY3JpcHQubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gQEBpbmNsdWRlKCdmdW5jdGlvbnMuanMnLHt9KVxuLy8gQEBpbmNsdWRlKCdwb3B1cHMuanMnLHt9KVxuLy8gQEBpbmNsdWRlKCdmb3Jtcy5qcycse30pXG4vLyBAQGluY2x1ZGUoJ3NsaWRlcnMuanMnLHt9KVxuLy8gQEBpbmNsdWRlKCdkeW5hbWljX2FkYXB0LmpzJyx7fSlcbndpbmRvdy5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gIC8vICDQtdGB0LvQuCDQvdGD0LbQvdC+INC/0L7QtNC60LvRjtGH0LjRgtGMINC00YDRg9Cz0L7QuSBqcyDQuNGB0L/QvtC70YzQt9C+0LLQsNGC0YwgaW5jbHVkZVxuICAvLyBKUy3RhNGD0L3QutGG0LjRjyDQvtC/0YDQtdC00LXQu9C10L3QuNGPINC/0L7QtNC00LXRgNC20LrQuCBXZWJQXG4gIC8vIGZ1bmN0aW9uIHRlc3RXZWJQKGNhbGxiYWNrKSB7XG4gIC8vIHZhciB3ZWJQID0gbmV3IEltYWdlKCk7XG4gIC8vIHdlYlAub25sb2FkID0gd2ViUC5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xuICAvLyBjYWxsYmFjayh3ZWJQLmhlaWdodCA9PSAyKTtcbiAgLy8gfTtcbiAgLy8gd2ViUC5zcmMgPSBcImRhdGE6aW1hZ2Uvd2VicDtiYXNlNjQsVWtsR1Jqb0FBQUJYUlVKUVZsQTRJQzRBQUFDeUFnQ2RBU29DQUFJQUxtazBtazBpSWlJaUlnQm9TeWdBQmM2V1dnQUEvdmVmZi8wUFA4YkEvL0x3WUFBQVwiO1xuICAvLyB9XG4gIC8vIHRlc3RXZWJQKGZ1bmN0aW9uIChzdXBwb3J0KSB7XG4gIC8vIGlmIChzdXBwb3J0ID09IHRydWUpIHtcbiAgLy8gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpLmNsYXNzTGlzdC5hZGQoJ3dlYnAnKTtcbiAgLy8gfWVsc2V7XG4gIC8vIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKS5jbGFzc0xpc3QuYWRkKCduby13ZWJwJyk7XG4gIC8vIH1cbiAgLy8gfSk7XG5cbiAgLy8g0JTQtdC70LXQs9C40YDQvtCy0LDQvdC40LVcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBkb2N1bWVudEFjdGlvbnMpXG5cbiAgLy8gQWN0aW9ucyAo0LTQtdC70LXQs9C40YDQvtCy0LDQvdC40LUg0YHQvtCx0YvRgtC40Y8gY2xpY2spXG5cbiAgZnVuY3Rpb24gZG9jdW1lbnRBY3Rpb25zKGUpIHtcbiAgICAvLyDQv9C+0LvRg9GH0LDRjiDRjdC70LXQvNC10L3RgiDQvdCwINC60L7RgtC+0YDRi9C5INC60LvQuNC60L3Rg9C7XG4gICAgY29uc3QgdGFyZ2V0RWxlbWVudCA9IGUudGFyZ2V0XG4gICAgaWYgKHdpbmRvdy5pbm5lcldpZHRoID4gNzY4ICYmIGlzTW9iaWxlT3JUYWJsZXQoKSkge1xuICAgICAgLy8g0LXRgdC70Lgg0Y3RgtC+0YIg0Y3Qu9C10LzQtdC90YIg0YEg0YLQsNC60LjQvCDQutC70LDRgdGB0L7QvFxuXG4gICAgICBpZiAodGFyZ2V0RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJy5tZW51X19hcnJvdycpKSB7XG4gICAgICAgIC8vINC/0L7Qu9GD0YfQsNGOINCx0LvQuNC20LDQudGI0LXQs9C+INGA0L7QtNC40YLQtdC70Y8g0YEg0LTQsNC90L3Ri9C8INC60LvQsNGB0YHQvtC8INC4INC00L7QsdCw0LLQu9GP0Y4g0LrQu9Cw0YHRgVxuXG4gICAgICAgIHRhcmdldEVsZW1lbnQuY2xvc2VzdCgnLm1lbnVfX2l0ZW0nKS5jbGFzc0xpc3QudG9nZ2xlKCdob3ZlcicpXG4gICAgICB9XG4gICAgICBpZiAoXG4gICAgICAgIC8vINC10YHQu9C4INC60LvQuNC6INC90LUg0L/QviDQvtGC0LrRgNGL0YLQvtC8INC80LXQvdGOINC4INC+0YLQutGA0YvRgtGL0YUg0LzQtdC90Y4g0LHQvtC70YzRiNC1IDEsINGD0LTQsNC70Y/RjiDRgyDQstGB0LXRhSDQutC70LDRgdGBIGhvdmVyXG4gICAgICAgICF0YXJnZXRFbGVtZW50LmNsb3Nlc3QoJy5tZW51X19pdGVtJykgJiZcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1lbnVfX2l0ZW0uaG92ZXInKS5sZW5ndGggPiAwXG4gICAgICApIHtcbiAgICAgICAgcmVtb3ZlQ2xhc3Nlc3QoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1lbnVfX2l0ZW0uaG92ZXInKSwgJ2hvdmVyJylcbiAgICAgIH1cbiAgICB9XG4gICAgLy/QvtGC0LrRgNGL0YLQuNC1LdC30LDQutGA0YvRgtC40LUg0YTQvtGA0LzRiyDQv9C+0LjRgdC60LBcbiAgICAvLyDQldGB0LvQuCDQutC70LjQutC90YPQu9C4INC/0L4g0LjQutC+0L3QutC1INGE0L7RgNC80Ysg0YLQviDRhNC+0YDQvNC1INC/0L7QuNGB0LrQsCDQtNC+0LHQsNCy0LjRgtGMINC60LvQsNGB0YEg0LXQutGC0LjQslxuICAgIGlmICh0YXJnZXRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnc2VhcmNoLWZvcm1fX2ljb24nKSkge1xuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlYXJjaC1mb3JtJykuY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJylcbiAgICB9IGVsc2UgaWYgKFxuICAgICAgLy8g0LXRgdC70Lgg0LrQu9C40LrQvdGD0LvQuCDQvdCwINC00L7QutGD0LzQtdC90YLQtSDQv9GA0Lgg0L7QutGA0YvRgtC+0Lkg0YTQvtGA0LzQtSDRgtC+INGD0LTQsNC70Y/QtdC8INC60LvQsNGB0YEg0LXQutGC0LjQslxuICAgICAgIXRhcmdldEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCcuc2VhcmNoLWZvcm0nKSAmJlxuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlYXJjaC1mb3JtLmFjdGl2ZScpXG4gICAgKSB7XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2VhcmNoLWZvcm0nKS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKVxuICAgIH1cblxuICAgIC8vIG1vYmlsZSBtZW51XG4gICAgaWYgKHRhcmdldEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdpY29uLW1lbnUnKSkge1xuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmljb24tbWVudScpLmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScpXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWVudV9fYm9keScpLmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScpXG4gICAgfVxuXG4gICAgLy8gYWRkIGpzb24gZGF0YSBwcm9kdWN0cyBjYXJkXG4gICAgaWYgKHRhcmdldEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwcm9kdWN0c19fbW9yZScpKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICAgIGdldFByb2R1Y3RzKHRhcmdldEVsZW1lbnQpXG4gICAgICAvLyBlLnByZXZlbnREZWZhdWx0KClcbiAgICB9XG5cbiAgICAvLyDQlNC+0LHQsNCy0LvQtdC90LjQtSDRgtC+0LLQsNGA0LAg0LIg0LrQvtGA0LfQuNC90YNcbiAgICBpZiAodGFyZ2V0RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGlvbnMtcHJvZHVjdF9fYnV0dG9uJykpIHtcbiAgICAgIGNvbnN0IHByb2R1Y3RJZCA9IHRhcmdldEVsZW1lbnQuY2xvc2VzdCgnLml0ZW0tcHJvZHVjdCcpLmRhdGFzZXQucGlkXG4gICAgICBhZGRUb0NhcnQodGFyZ2V0RWxlbWVudCwgcHJvZHVjdElkKVxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgfVxuXG4gICAgLy8g0JTQvtCx0LDQstC70Y/QtdGCINC60LvQsNGBIGFjdGl2ZSDQv9GA0Lgg0LrQu9C40LrQtSDQvdCwINC60L7RgNC30LjQvdGDICjQvtGC0LrRgNGL0LLQsNC10YIg0YHQv9C40YHQvtC6INC/0L7QutGD0L/QvtC6KVxuICAgIGlmIChcbiAgICAgIHRhcmdldEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdjYXJ0LWhlYWRlcl9faWNvbicpIHx8XG4gICAgICB0YXJnZXRFbGVtZW50LmNsb3Nlc3QoJy5jYXJ0LWhlYWRlcl9faWNvbicpXG4gICAgKSB7XG4gICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhcnQtbGlzdCcpLmNoaWxkcmVuLmxlbmd0aCA+IDApIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJ0LWhlYWRlcicpLmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScpXG4gICAgICB9XG4gICAgICAvLyBlLnByZXZlbnREZWZhdWx0KClcbiAgICB9IGVsc2UgaWYgKFxuICAgICAgIXRhcmdldEVsZW1lbnQuY2xvc2VzdCgnLmNhcnQtaGVhZGVyJykgJiZcbiAgICAgICF0YXJnZXRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnYWN0aW9ucy1wcm9kdWN0X19idXR0b24nKVxuICAgICkge1xuICAgICAgLy8g0LfQsNC60YDRi9Cy0LDRjiDQv9GA0Lgg0LrQu9C40LrQtSDQvdCwINC00YDRg9Cz0YPRjiDQvtCx0LvQsNGB0YLRjFxuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhcnQtaGVhZGVyJykuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJylcbiAgICB9XG4gICAgLy8g0KPQtNCw0LvRj9C10Lwg0Y3Qu9C10LzQtdC90YIg0YEg0LrQvtGA0LfQuNC90Ysg0L/RgNC4INC60LvQuNC60LVcbiAgICBpZiAodGFyZ2V0RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2NhcnQtbGlzdF9fZGVsZXRlJykpIHtcbiAgICAgIGNvbnN0IHByb2R1Y3RJZCA9XG4gICAgICAgIHRhcmdldEVsZW1lbnQuY2xvc2VzdCgnLmNhcnQtbGlzdF9faXRlbScpLmRhdGFzZXQuY2FydFBpZFxuICAgICAgdXBkYXRlQ2FydCh0YXJnZXRFbGVtZW50LCBwcm9kdWN0SWQsIGZhbHNlKVxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgfVxuICB9XG5cbiAgLy8gZHluYW1pYyBhZGFwdFxuICBjb25zdCBkYSA9IG5ldyBEeW5hbWljQWRhcHQoJ21heCcpXG4gIGRhLmluaXQoKVxuXG4gIC8vIGhlYWRlciAtINC/0YDQuCDRgdC60YDQvtC70LUg0LTQvtCx0LDQstC70Y/QtdGCINC60LvQsNGB0YEgX3Njcm9sbCDQuiDRiNCw0L/QutC1INGD0LzQtdC90YzRiNCw0LXRgiDRiNCw0L/QutGDINC80LXQvdGP0Y/QtdGCINGE0L7QvVxuICBjb25zdCBoZWFkZXJFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcicpXG5cbiAgLy8g0LTQvtCx0LDQstC70Y/QtdGCINC6INGF0LXQtNC10YDRgyDQutC70LDRgdGBIF9zY3JvbGwg0LrQvtCz0LTQsCDQv9GA0L7QutGA0YPRh9C40LLQsNC10Lwg0L3QsCDQstGL0YHQvtGC0YMg0YjQsNC/0LrQuCDQuCDQvdCw0L7QsdC+0YDQvtGCXG4gIGNvbnN0IGNhbGxiYWNrID0gZnVuY3Rpb24gKGVudHJpZXMsIG9ic2VydmVyKSB7XG4gICAgaWYgKGVudHJpZXNbMF0uaXNJbnRlcnNlY3RpbmcpIHtcbiAgICAgIGhlYWRlckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnX3Njcm9sbCcpXG4gICAgfSBlbHNlIHtcbiAgICAgIGhlYWRlckVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnX3Njcm9sbCcpXG4gICAgfVxuICB9XG5cbiAgY29uc3QgaGVhZGVyT2JzZXJ2ZXIgPSBuZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoY2FsbGJhY2spXG4gIGhlYWRlck9ic2VydmVyLm9ic2VydmUoaGVhZGVyRWxlbWVudCkgLy8gSW50ZXJzZWN0aW9uT2JzZXJ2ZXIg0L3QsNGH0LjQvdCw0LXRgiDRgdC70LXQtNC40YLRjCDQvdCw0LQg0YXQtdC00LXRgNC+0LxcblxuICAvLyBMb2FkIG1vcmUgcHJvZHVjdHMgSlNPTlxuICBmdW5jdGlvbiBnZXRQcm9kdWN0cyhidXR0b24pIHtcbiAgICBpZiAoIWJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoJ19ob2xkJykpIHtcbiAgICAgIC8vINC60LTQsNGBIF9ob2xkINC00LXQu9Cw0LXRgiDQutC90L7Qv9C60YMg0LLRgNC10LzQtdC90L3QviDQvdC1INCw0LrRgtC40LLQvdC+0LlcbiAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdfaG9sZCcpXG4gICAgICBjb25zdCBmaWxlID0gJ2pzb24vcHJvZHVjdHMuanNvbidcblxuICAgICAgLy8g0LLQvtC30LLRgNCw0YnQsNC10YIgZmV0Y2hcbiAgICAgIHNlbmRSZXF1ZXN0KCdHRVQnLCBmaWxlKVxuICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICAgIGlmIChkYXRhKSB7XG4gICAgICAgICAgICBsb2FkUHJvZHVjdHMoZGF0YSlcbiAgICAgICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdfaG9sZCcpXG4gICAgICAgICAgICBidXR0b24ucmVtb3ZlKCkgLy8g0KPQtNCw0LvRj9GOINC60L3QvtC/0LrRgyDRh9GC0L7QsSDQvdC1INCx0YvQu9C+INC/0L7QstGC0L7RgNC90YvRhSDQvdCw0LbQsNGC0LjQuSAo0LIg0YDQtdCw0LvRjNC90YvRhSDQv9GA0L7RjdC60YLQsNGFINC90LUg0L3Rg9C20L3QvilcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYWxlcnQoJ9Ce0YjQuNCx0LrQsCcpXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSlcbiAgICB9XG4gIH1cblxuICAvLyDQktGL0LLQvtC0INC60LDRgNGC0L7Rh9C10Log0YLQvtCy0LDRgNC+0LIg0YEgSlNPTlxuICBmdW5jdGlvbiBsb2FkUHJvZHVjdHMoZGF0YSkge1xuICAgIGNvbnN0IHByb2R1Y3RzSXRlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZHVjdHNfX2l0ZW1zJykgLy8g0LrQvtC90YLQtdC50L3QtdGAINC00LvRjyDQutCw0YDRgtC+0YfQtdC6INGC0L7QstCw0YDQsFxuXG4gICAgZGF0YS5wcm9kdWN0cy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICBjb25zdCBwcm9kdWN0SWQgPSBpdGVtLmlkXG4gICAgICBjb25zdCBwcm9kdWN0VXJsID0gaXRlbS51cmxcbiAgICAgIGNvbnN0IHByb2R1Y3RJbWFnZSA9IGl0ZW0uaW1hZ2VcbiAgICAgIGNvbnN0IHByb2R1Y3RUaXRsZSA9IGl0ZW0udGl0bGVcbiAgICAgIGNvbnN0IHByb2R1Y3RUZXh0ID0gaXRlbS50ZXh0XG4gICAgICBjb25zdCBwcm9kdWN0UHJpY2UgPSBpdGVtLnByaWNlXG4gICAgICBjb25zdCBwcm9kdWN0T2xkUHJpY2UgPSBpdGVtLnByaWNlT2xkXG4gICAgICBjb25zdCBwcm9kdWN0U2hhcmVVcmwgPSBpdGVtLnNoYXJlVXJsXG4gICAgICBjb25zdCBwcm9kdWN0TGlrZVVybCA9IGl0ZW0ubGlrZVVybFxuICAgICAgY29uc3QgcHJvZHVjdExhYmVscyA9IGl0ZW0ubGFiZWxzXG5cbiAgICAgIGxldCBwcm9kdWN0VGVtcGxhdGVTdGFydCA9IGA8YXJ0aWNsZSBkYXRhLXBpZD1cIiR7cHJvZHVjdElkfVwiIGNsYXNzPVwicHJvZHVjdHNfX2l0ZW0gaXRlbS1wcm9kdWN0XCI+YFxuICAgICAgbGV0IHByb2R1Y3RUZW1wbGF0ZUVuZCA9IGA8L2FydGljbGU+YFxuXG4gICAgICBsZXQgcHJvZHVjdFRlbXBsYXRlTGFiZWxzID0gJydcbiAgICAgIGlmIChwcm9kdWN0TGFiZWxzKSB7XG4gICAgICAgIGxldCBwcm9kdWN0VGVtcGxhdGVMYWJlbHNTdGFydCA9IGA8ZGl2IGNsYXNzPVwiaXRlbS1wcm9kdWN0X19sYWJlbHNcIj5gXG4gICAgICAgIGxldCBwcm9kdWN0VGVtcGxhdGVMYWJlbHNFbmQgPSBgPC9kaXY+YFxuICAgICAgICBsZXQgcHJvZHVjdFRlbXBsYXRlTGFiZWxzQ29udGVudCA9ICcnXG5cbiAgICAgICAgcHJvZHVjdExhYmVscy5mb3JFYWNoKChsYWJlbEl0ZW0pID0+IHtcbiAgICAgICAgICBwcm9kdWN0VGVtcGxhdGVMYWJlbHNDb250ZW50ICs9IGA8ZGl2IGNsYXNzPVwiaXRlbS1wcm9kdWN0X19sYWJlbCBpdGVtLXByb2R1Y3RfX2xhYmVsXyR7bGFiZWxJdGVtLnR5cGV9XCI+JHtsYWJlbEl0ZW0udmFsdWV9PC9kaXY+YFxuICAgICAgICB9KVxuXG4gICAgICAgIHByb2R1Y3RUZW1wbGF0ZUxhYmVscyArPSBwcm9kdWN0VGVtcGxhdGVMYWJlbHNTdGFydFxuICAgICAgICBwcm9kdWN0VGVtcGxhdGVMYWJlbHMgKz0gcHJvZHVjdFRlbXBsYXRlTGFiZWxzQ29udGVudFxuICAgICAgICBwcm9kdWN0VGVtcGxhdGVMYWJlbHMgKz0gcHJvZHVjdFRlbXBsYXRlTGFiZWxzRW5kXG4gICAgICB9XG5cbiAgICAgIGxldCBwcm9kdWN0VGVtcGxhdGVJbWFnZSA9IGBcblx0XHQ8YSBocmVmPVwiJHtwcm9kdWN0VXJsfVwiIGNsYXNzPVwiaXRlbS1wcm9kdWN0X19pbWFnZSBfaWJnXCI+XG5cdFx0XHQ8aW1nIHNyYz1cImltYWdlcy9wcm9kdWN0cy8ke3Byb2R1Y3RJbWFnZX1cIiBhbHQ9XCIke3Byb2R1Y3RUaXRsZX1cIj5cblx0XHQ8L2E+XG5cdGBcblxuICAgICAgbGV0IHByb2R1Y3RUZW1wbGF0ZUJvZHlTdGFydCA9IGA8ZGl2IGNsYXNzPVwiaXRlbS1wcm9kdWN0X19ib2R5XCI+YFxuICAgICAgbGV0IHByb2R1Y3RUZW1wbGF0ZUJvZHlFbmQgPSBgPC9kaXY+YFxuXG4gICAgICBsZXQgcHJvZHVjdFRlbXBsYXRlQ29udGVudCA9IGBcblx0XHQ8ZGl2IGNsYXNzPVwiaXRlbS1wcm9kdWN0X19jb250ZW50XCI+XG5cdFx0XHQ8aDMgY2xhc3M9XCJpdGVtLXByb2R1Y3RfX3RpdGxlXCI+JHtwcm9kdWN0VGl0bGV9PC9oMz5cblx0XHRcdDxkaXYgY2xhc3M9XCJpdGVtLXByb2R1Y3RfX3RleHRcIj4ke3Byb2R1Y3RUZXh0fTwvZGl2PlxuXHRcdDwvZGl2PlxuXHRgXG5cbiAgICAgIGxldCBwcm9kdWN0VGVtcGxhdGVQcmljZXMgPSAnJ1xuICAgICAgbGV0IHByb2R1Y3RUZW1wbGF0ZVByaWNlc1N0YXJ0ID0gYDxkaXYgY2xhc3M9XCJpdGVtLXByb2R1Y3RfX3ByaWNlc1wiPmBcbiAgICAgIGxldCBwcm9kdWN0VGVtcGxhdGVQcmljZXNDdXJyZW50ID0gYDxkaXYgY2xhc3M9XCJpdGVtLXByb2R1Y3RfX3ByaWNlXCI+UnAgJHtwcm9kdWN0UHJpY2V9PC9kaXY+YFxuICAgICAgbGV0IHByb2R1Y3RUZW1wbGF0ZVByaWNlc09sZCA9IGA8ZGl2IGNsYXNzPVwiaXRlbS1wcm9kdWN0X19wcmljZSBpdGVtLXByb2R1Y3RfX3ByaWNlX29sZFwiPlJwICR7cHJvZHVjdE9sZFByaWNlfTwvZGl2PmBcbiAgICAgIGxldCBwcm9kdWN0VGVtcGxhdGVQcmljZXNFbmQgPSBgPC9kaXY+YFxuXG4gICAgICBwcm9kdWN0VGVtcGxhdGVQcmljZXMgPSBwcm9kdWN0VGVtcGxhdGVQcmljZXNTdGFydFxuICAgICAgcHJvZHVjdFRlbXBsYXRlUHJpY2VzICs9IHByb2R1Y3RUZW1wbGF0ZVByaWNlc0N1cnJlbnRcbiAgICAgIGlmIChwcm9kdWN0T2xkUHJpY2UpIHtcbiAgICAgICAgcHJvZHVjdFRlbXBsYXRlUHJpY2VzICs9IHByb2R1Y3RUZW1wbGF0ZVByaWNlc09sZFxuICAgICAgfVxuICAgICAgcHJvZHVjdFRlbXBsYXRlUHJpY2VzICs9IHByb2R1Y3RUZW1wbGF0ZVByaWNlc0VuZFxuXG4gICAgICBsZXQgcHJvZHVjdFRlbXBsYXRlQWN0aW9ucyA9IGBcblx0XHQ8ZGl2IGNsYXNzPVwiaXRlbS1wcm9kdWN0X19hY3Rpb25zIGFjdGlvbnMtcHJvZHVjdFwiPlxuXHRcdFx0PGRpdiBjbGFzcz1cImFjdGlvbnMtcHJvZHVjdF9fYm9keVwiPlxuXHRcdFx0XHQ8YSBocmVmPVwiXCIgY2xhc3M9XCJhY3Rpb25zLXByb2R1Y3RfX2J1dHRvbiBidG4gYnRuX3doaXRlXCI+QWRkIHRvIGNhcnQ8L2E+XG5cdFx0XHRcdDxhIGhyZWY9XCIke3Byb2R1Y3RTaGFyZVVybH1cIiBjbGFzcz1cImFjdGlvbnMtcHJvZHVjdF9fbGluayBfaWNvbi1zaGFyZVwiPlNoYXJlPC9hPlxuXHRcdFx0XHQ8YSBocmVmPVwiJHtwcm9kdWN0TGlrZVVybH1cIiBjbGFzcz1cImFjdGlvbnMtcHJvZHVjdF9fbGluayBfaWNvbi1mYXZvcml0ZVwiPkxpa2U8L2E+XG5cdFx0XHQ8L2Rpdj5cblx0XHQ8L2Rpdj5cblx0YFxuXG4gICAgICBsZXQgcHJvZHVjdFRlbXBsYXRlQm9keSA9ICcnXG4gICAgICBwcm9kdWN0VGVtcGxhdGVCb2R5ICs9IHByb2R1Y3RUZW1wbGF0ZUJvZHlTdGFydFxuICAgICAgcHJvZHVjdFRlbXBsYXRlQm9keSArPSBwcm9kdWN0VGVtcGxhdGVDb250ZW50XG4gICAgICBwcm9kdWN0VGVtcGxhdGVCb2R5ICs9IHByb2R1Y3RUZW1wbGF0ZVByaWNlc1xuICAgICAgcHJvZHVjdFRlbXBsYXRlQm9keSArPSBwcm9kdWN0VGVtcGxhdGVBY3Rpb25zXG4gICAgICBwcm9kdWN0VGVtcGxhdGVCb2R5ICs9IHByb2R1Y3RUZW1wbGF0ZUJvZHlFbmRcblxuICAgICAgbGV0IHByb2R1Y3RUZW1wbGF0ZSA9ICcnXG4gICAgICBwcm9kdWN0VGVtcGxhdGUgKz0gcHJvZHVjdFRlbXBsYXRlU3RhcnRcbiAgICAgIHByb2R1Y3RUZW1wbGF0ZSArPSBwcm9kdWN0VGVtcGxhdGVMYWJlbHNcbiAgICAgIHByb2R1Y3RUZW1wbGF0ZSArPSBwcm9kdWN0VGVtcGxhdGVJbWFnZVxuICAgICAgcHJvZHVjdFRlbXBsYXRlICs9IHByb2R1Y3RUZW1wbGF0ZUJvZHlcbiAgICAgIHByb2R1Y3RUZW1wbGF0ZSArPSBwcm9kdWN0VGVtcGxhdGVFbmRcblxuICAgICAgcHJvZHVjdHNJdGVtcy5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsIHByb2R1Y3RUZW1wbGF0ZSlcbiAgICB9KVxuICB9XG5cbiAgLy8gQWRkVG9DYXJ0ICjRgdC+0LfQtNCw0LXRgiDRjdC80LjRgtCw0YbQuNGOINCw0L3QuNC80LjRgNC+0LLQsNC90L7Qs9C+INC00L7QsdCw0LLQu9C10L3QuNGPINGC0L7QstCw0YDQsCDQsiDQutC+0YDQt9C40L3RgyDQv9GD0YLQtdC8INGB0L7Qt9C00LDQvdC40Y8g0LrQu9C+0L3QsCDQuCDQuNC30LzQtdC90LXQvdC40Y8g0LXQs9C+INGB0YLQuNC70LXQuSlcbiAgZnVuY3Rpb24gYWRkVG9DYXJ0KHByb2R1Y3RCdXR0b24sIHByb2R1Y3RJZCkge1xuICAgIGlmICghcHJvZHVjdEJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoJ19ob2xkJykpIHtcbiAgICAgIHByb2R1Y3RCdXR0b24uY2xhc3NMaXN0LmFkZCgnX2hvbGQnKVxuICAgICAgcHJvZHVjdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdfZmx5JylcblxuICAgICAgY29uc3QgY2FydCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJ0LWhlYWRlcl9faWNvbicpXG4gICAgICBjb25zdCBwcm9kdWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgW2RhdGEtcGlkPVwiJHtwcm9kdWN0SWR9XCJdYClcbiAgICAgIGNvbnN0IHByb2R1Y3RJbWFnZSA9IHByb2R1Y3QucXVlcnlTZWxlY3RvcignLml0ZW0tcHJvZHVjdF9faW1hZ2UnKVxuXG4gICAgICBjb25zdCBwcm9kdWN0SW1hZ2VGbHkgPSBwcm9kdWN0SW1hZ2UuY2xvbmVOb2RlKHRydWUpXG5cbiAgICAgIGNvbnN0IHByb2R1Y3RJbWFnZUZseVdpZHRoID0gcHJvZHVjdEltYWdlLm9mZnNldFdpZHRoXG4gICAgICBjb25zdCBwcm9kdWN0SW1hZ2VGbHlIZWlnaHQgPSBwcm9kdWN0SW1hZ2Uub2Zmc2V0SGVpZ2h0XG4gICAgICBjb25zdCBwcm9kdWN0SW1hZ2VGbHlUb3AgPSBwcm9kdWN0SW1hZ2UuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wXG4gICAgICBjb25zdCBwcm9kdWN0SW1hZ2VGbHlMZWZ0ID0gcHJvZHVjdEltYWdlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnRcblxuICAgICAgcHJvZHVjdEltYWdlRmx5LnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnX2ZseUltYWdlIF9pYmcnKVxuICAgICAgcHJvZHVjdEltYWdlRmx5LnN0eWxlLmNzc1RleHQgPSBgXG4gICAgICAgIGxlZnQ6ICR7cHJvZHVjdEltYWdlRmx5TGVmdH1weDtcbiAgICAgICAgdG9wOiAke3Byb2R1Y3RJbWFnZUZseVRvcH1weDtcbiAgICAgICAgd2lkdGg6ICR7cHJvZHVjdEltYWdlRmx5V2lkdGh9cHg7XG4gICAgICAgIGhlaWdodDogJHtwcm9kdWN0SW1hZ2VGbHlIZWlnaHR9cHg7XG4gICAgICBgXG5cbiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kKHByb2R1Y3RJbWFnZUZseSlcblxuICAgICAgY29uc3QgY2FydEZseUxlZnQgPSBjYXJ0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnRcbiAgICAgIGNvbnN0IGNhcnRGbHlUb3AgPSBjYXJ0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcFxuXG4gICAgICBwcm9kdWN0SW1hZ2VGbHkuc3R5bGUuY3NzVGV4dCA9IGBcbiAgICAgICAgbGVmdDogJHtjYXJ0Rmx5TGVmdH1weDtcbiAgICAgICAgdG9wOiAke2NhcnRGbHlUb3B9cHg7XG4gICAgICAgIHdpZHRoOiAwcHg7XG4gICAgICAgIGhlaWdodDogMHB4O1xuICAgICAgICBvcGFjaXR5OiAwXG4gICAgICBgXG5cbiAgICAgIHByb2R1Y3RJbWFnZUZseS5hZGRFdmVudExpc3RlbmVyKCd0cmFuc2l0aW9uZW5kJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAocHJvZHVjdEJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoJ19mbHknKSkge1xuICAgICAgICAgIHByb2R1Y3RJbWFnZUZseS5yZW1vdmUoKVxuICAgICAgICAgIHVwZGF0ZUNhcnQocHJvZHVjdEJ1dHRvbiwgcHJvZHVjdElkKVxuICAgICAgICAgIHByb2R1Y3RCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnX2ZseScpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgLy8g0JTQvtCx0LDQstC70Y/QtdGCINGC0L7QstCw0YDRiyDQsiDQutC+0YDQt9C40L3RgyDQuCDRg9C00LDQu9GP0LXRgiDRgSDQvdC10LVcbiAgZnVuY3Rpb24gdXBkYXRlQ2FydChwcm9kdWN0QnV0dG9uLCBwcm9kdWN0SWQsIHByb2R1Y3RBZGQgPSB0cnVlKSB7XG4gICAgY29uc3QgY2FydCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJ0LWhlYWRlcicpXG4gICAgY29uc3QgY2FydEljb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2FydC1oZWFkZXJfX2ljb24nKVxuICAgIGNvbnN0IGNhcnRRdWFudGl0eSA9IGNhcnRJY29uLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKVxuICAgIGNvbnN0IGNhcnRQcm9kdWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgW2RhdGEtY2FydC1waWQ9XCIke3Byb2R1Y3RJZH1cIl1gKVxuICAgIGNvbnN0IGNhcnRMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhcnQtbGlzdCcpXG5cbiAgICAvLyDQlNC+0LHQsNCy0LvRj9C10LxcbiAgICBpZiAocHJvZHVjdEFkZCkge1xuICAgICAgaWYgKGNhcnRRdWFudGl0eSkge1xuICAgICAgICBjYXJ0UXVhbnRpdHkuaW5uZXJIVE1MID0gKytjYXJ0UXVhbnRpdHkuaW5uZXJIVE1MIC8vINC10YHQu9C4INGB0L/QsNC9INGD0LbQtSDQtdGB0YLRjCDQtNC+0LHQsNCy0LvRj9GOIDFcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNhcnRJY29uLmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJywgYDxzcGFuPjE8L3NwYW4+YClcbiAgICAgIH1cblxuICAgICAgLy/QtNC+0LHQsNCy0LvRj9GOINGB0L/QuNGB0L7QuiDRgtC+0LLQsNGA0L7QslxuICAgICAgaWYgKCFjYXJ0UHJvZHVjdCkge1xuICAgICAgICBjb25zdCBwcm9kdWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgW2RhdGEtcGlkPVwiJHtwcm9kdWN0SWR9XCJdYClcbiAgICAgICAgY29uc3QgY2FydFByb2R1Y3RJbWFnZSA9IHByb2R1Y3QucXVlcnlTZWxlY3RvcihcbiAgICAgICAgICAnLml0ZW0tcHJvZHVjdF9faW1hZ2UnXG4gICAgICAgICkuaW5uZXJIVE1MXG4gICAgICAgIGNvbnN0IGNhcnRQcm9kdWN0VGl0bGUgPSBwcm9kdWN0LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgICAgJy5pdGVtLXByb2R1Y3RfX3RpdGxlJ1xuICAgICAgICApLmlubmVySFRNTFxuICAgICAgICBjb25zdCBjYXJ0UHJvZHVjdENvbnRlbnQgPSBgXG4gICAgICAgIDxhIGhyZWY9XCIjXCIgY2xhc3M9XCJjYXJ0LWxpc3RfX2ltYWdlIF9pYmdcIj4ke2NhcnRQcm9kdWN0SW1hZ2V9PC9hPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiY2FydC1saXN0X19ib2R5XCI+XG4gICAgICAgICAgPGEgaHJlZj1cIiNcIiBjbGFzcz1cImNhcnQtbGlzdF9fdGl0bGVcIj4ke2NhcnRQcm9kdWN0VGl0bGV9PC9hPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXJ0LWxpc3RfX3F1YW50aXR5XCI+UXVhbnRpdHk6IDxzcGFuPjE8L3NwYW4+PC9kaXY+XG4gICAgICAgICAgPGEgaHJlZj1cIiNcIiBjbGFzcz1cImNhcnQtbGlzdF9fZGVsZXRlXCI+RGVsZXRlPC9hPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgYFxuICAgICAgICBjYXJ0TGlzdC5pbnNlcnRBZGphY2VudEhUTUwoXG4gICAgICAgICAgJ2JlZm9yZWVuZCcsXG4gICAgICAgICAgYDxsaSBkYXRhLWNhcnQtcGlkPVwiJHtwcm9kdWN0SWR9XCIgY2xhc3M9XCJjYXJ0LWxpc3RfX2l0ZW1cIj4ke2NhcnRQcm9kdWN0Q29udGVudH08L2xpPmBcbiAgICAgICAgKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgY2FydFByb2R1Y3RRdWFudGl0eSA9IGNhcnRQcm9kdWN0LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgICAgJy5jYXJ0LWxpc3RfX3F1YW50aXR5IHNwYW4nXG4gICAgICAgIClcbiAgICAgICAgY2FydFByb2R1Y3RRdWFudGl0eS5pbm5lckhUTUwgPSArK2NhcnRQcm9kdWN0UXVhbnRpdHkuaW5uZXJIVE1MXG4gICAgICB9XG5cbiAgICAgIC8vINCf0L7RgdC70LUg0LLRgdC10YUg0LTQtdC50YHRgtCy0LjQuVxuICAgICAgcHJvZHVjdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdfaG9sZCcpXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vINGB0L3QsNGH0LDQu9CwINGD0LzQtdC90YzRiNCw0LXRgiDQutC+0LvQuNGH0LXRgdGC0LLQviDRgtC+0LLQsNGA0L7Qsiwg0L/QvtGC0L7QvCDRg9C00LDQu9GP0LXRglxuICAgICAgY29uc3QgY2FydFByb2R1Y3RRdWFudGl0eSA9IGNhcnRQcm9kdWN0LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgICcuY2FydC1saXN0X19xdWFudGl0eSBzcGFuJ1xuICAgICAgKVxuICAgICAgY2FydFByb2R1Y3RRdWFudGl0eS5pbm5lckhUTUwgPSAtLWNhcnRQcm9kdWN0UXVhbnRpdHkuaW5uZXJIVE1MXG4gICAgICBpZiAoIXBhcnNlSW50KGNhcnRQcm9kdWN0UXVhbnRpdHkuaW5uZXJIVE1MKSkge1xuICAgICAgICBjYXJ0UHJvZHVjdC5yZW1vdmUoKVxuICAgICAgfVxuXG4gICAgICBjb25zdCBjYXJ0UXVhbnRpdHlWYWx1ZSA9IC0tY2FydFF1YW50aXR5LmlubmVySFRNTFxuXG4gICAgICBpZiAoY2FydFF1YW50aXR5VmFsdWUpIHtcbiAgICAgICAgY2FydFF1YW50aXR5LmlubmVySFRNTCA9IGNhcnRRdWFudGl0eVZhbHVlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjYXJ0UXVhbnRpdHkucmVtb3ZlKClcbiAgICAgICAgY2FydC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vINCT0LDQu9C70LXRgNC10Y9cbiAgY29uc3QgZnVybml0dXJlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZ1cm5pdHVyZV9fYm9keScpXG5cbiAgaWYgKGZ1cm5pdHVyZSAmJiAhaXNNb2JpbGVPclRhYmxldCgpKSB7XG4gICAgY29uc3QgZnVybml0dXJlSXRlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZnVybml0dXJlX19pdGVtcycpXG4gICAgY29uc3QgZnVybml0dXJlQ29sdW1uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmZ1cm5pdHVyZV9fY29sdW1uJylcblxuICAgIC8vINCh0LrQvtGA0L7RgdGC0Ywg0LDQvdC40LzQsNGG0LjQuFxuICAgIGNvbnN0IHNwZWVkID0gZnVybml0dXJlLmRhdGFzZXQuc3BlZWRcblxuICAgIC8vINCe0LHQvdC+0LLQu9C10L3QuNC1INC/0LXRgNC10LzQtdC90L3Ri9GFXG4gICAgbGV0IHBvc2l0aW9uWCA9IDBcbiAgICBsZXQgY29vcmRYcHJvY2VudCA9IDBcblxuICAgIGZ1bmN0aW9uIHNldE1vdXNlR2FsbGVyeVN0eWxlKCkge1xuICAgICAgbGV0IGZ1cm5pdHVyZUl0ZW1zV2lkdGggPSAwXG4gICAgICBmdXJuaXR1cmVDb2x1bW4uZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICBmdXJuaXR1cmVJdGVtc1dpZHRoICs9IGVsZW1lbnQub2Zmc2V0V2lkdGhcbiAgICAgIH0pXG5cbiAgICAgIGNvbnN0IGZ1cm5pdHVyZURpZmZlcmVudCA9IGZ1cm5pdHVyZUl0ZW1zV2lkdGggLSBmdXJuaXR1cmUub2Zmc2V0V2lkdGhcbiAgICAgIGNvbnN0IGRpc3RYID0gTWF0aC5mbG9vcihjb29yZFhwcm9jZW50IC0gcG9zaXRpb25YKVxuXG4gICAgICBwb3NpdGlvblggPSBwb3NpdGlvblggKyBkaXN0WCAqIHNwZWVkXG4gICAgICBsZXQgcG9zaXRpb24gPSAoZnVybml0dXJlRGlmZmVyZW50IC8gMjAwKSAqIHBvc2l0aW9uWFxuXG4gICAgICBmdXJuaXR1cmVJdGVtcy5zdHlsZS5jc3NUZXh0ID0gYHRyYW5zZm9ybTogdHJhbnNsYXRlM2QoJHstcG9zaXRpb259cHgsMCwwKTtgXG5cbiAgICAgIGlmIChNYXRoLmFicyhkaXN0WCkgPiAwKSB7XG4gICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShzZXRNb3VzZUdhbGxlcnlTdHlsZSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZ1cm5pdHVyZS5jbGFzc0xpc3QucmVtb3ZlKCdfaW5pdCcpXG4gICAgICB9XG4gICAgfVxuICAgIGZ1cm5pdHVyZS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgLy8g0J/QvtC70YPRh9C10L3QuNC1INGI0LjRgNC40L3Ri1xuICAgICAgY29uc3QgZnVybml0dXJlV2lkdGggPSBmdXJuaXR1cmUub2Zmc2V0V2lkdGhcblxuICAgICAgLy8g0J3QvtC70Ywg0L/QviDRgdC10YDQtdC00LjQvdC1XG4gICAgICBjb25zdCBjb29yZFggPSBlLnBhZ2VYIC0gZnVybml0dXJlV2lkdGggLyAyXG5cbiAgICAgIC8vINCf0L7Qu9GD0YfQsNC10Lwg0L/RgNC+0YbQtdC90YLRi1xuICAgICAgY29vcmRYcHJvY2VudCA9IChjb29yZFggLyBmdXJuaXR1cmVXaWR0aCkgKiAyMDBcblxuICAgICAgaWYgKCFmdXJuaXR1cmUuY2xhc3NMaXN0LmNvbnRhaW5zKCdfaW5pdCcpKSB7XG4gICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShzZXRNb3VzZUdhbGxlcnlTdHlsZSlcbiAgICAgICAgZnVybml0dXJlLmNsYXNzTGlzdC5hZGQoJ19pbml0JylcbiAgICAgIH1cbiAgICB9KVxuICB9XG59XG4iXX0=
